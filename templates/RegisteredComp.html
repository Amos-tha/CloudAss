{%extends "adminLayout.html"%}

{% block title %}Company Registration{% endblock %}

{% block head %}
{{super()}}
<link href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css' rel='stylesheet'
    type='text/css'>
<link href='https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css' rel='stylesheet' type='text/css'>

<script language="JavaScript" type="text/javascript" src="https://code.jquery.com/jquery-3.7.0.js"></script>
<script language="JavaScript" type="text/javascript"
    src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script language="JavaScript" type="text/javascript"
    src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
{% endblock %}
{% block content %}
	<div class="d-flex flex-row justify-content-center align-items-center ">
		<div class="col-10">
			<div class="row">
			<div class="fs-2 fw-bold mb-2 col-6">Registered Company</div>
		</div>
		<table id='datatable' class='table table-hover' width='100%'>
			<thead>
				<tr>
					<th style="background-color: rgb(194, 194, 194); ">ID</th>
					<th style="background-color: rgb(194, 194, 194); ">Company Name</th>
					<th style="background-color: rgb(194, 194, 194); ">Status</th>
					<th style="background-color: rgb(194, 194, 194); ">Action</th>
				</tr>
			</thead>
		</table>
		</div>

	</div>
	<script type="text/javascript">
		$(document).ready(function () {
			var table = $('#datatable').DataTable({
				'processing': true,
				'serverSide': true,
				'serverMethod': 'post',
				'ajax': {
					'url': '/admin/getrecomp'
				},
				'lengthMenu': [[10, 25, 50, -1], [10, 25, 50, "All"]],
				searching: true,
				sort: false,
				"serverSide": true,
				'columnDefs': [
					{
						defaultContent: '<button class="btn btn-secondary btn-sm">More</button>',
						targets: -1
					},
					{
						defaultContent: "-",
						targets: "_all"
					},
				],
				'columns': [
					{ data: 'compID' },
					{ data: 'compName' },
					{ data: 'status' },
					{ data: null }
				]
			});
	
			table.on('click', 'button', function (e) {
				let data = table.row(e.target.closest('tr')).data();
				window.location.replace("/admin/compdetails/" + data.compID);
			});
		});
	</script>
		{%endblock%}
